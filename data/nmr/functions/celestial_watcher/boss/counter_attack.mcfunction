execute as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run playsound entity.warden.angry ambient @a ~ ~ ~ 1 1.5
execute as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=minecraft:trident,distance=..5] run playsound entity.warden.listening_angry ambient @a ~ ~ ~ 1 1.5

execute as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] if predicate nmv:percentages/20percent run kill @e[tag=nmv_eye_protector,limit=1,distance=..30]

execute store result score $eye_counter nmv.technical run random value 1..10

execute if score $eye_counter nmv.technical matches 1 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODk3NWU1MWJmZTQ4Zjg3NmU3NzQ4OTM1ZDY5MjIzNGRiZmY1ZGY3Mzk4ZDc2OThhZGNlMzQ2Nzg4ZjNjZTdkOCJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 2 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMzIzYWJlODM4ZGVlY2YzODk0YmFmYTMyMDdhOThhZGQ0ODAzNmRkMmVlZDRkZDExYmQyMmJmZWUzZmM0Yjk5MyJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 3 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNmMwZDM5NjEzZGQ3ZTVlNTY5ZmVmOTFjZTE2NzE0MDI5OWE1YmNlZmY0OTEzNWFmYjU0YjI4MWE3ZjEyYzI5MSJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 4 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzRmMDIxYzdmZTVjM2VkNTNjZjEzNzhkMGRjOGRhYTlhZjQ1YzdlNjU5N2JlZDI0ZjI4YzlhMzRhZDJlYWZjNyJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 5 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvN2RmZDBjY2IwNDlhYzFiYjYyY2E0ODc2MzA0ZDJlYzQ4OTYyOGZiY2EyMTE1MWVkZDI3OWIxYjc5MzNhMmMwNiJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 6 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTc4NWQ1MmIyMzlkYmVhNWI2MTk1YmFkMmI2MmM3YzE3MTE0N2MyODM1YjI5NDk0MWIyODY4YWUzNzM1Mjc5NiJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 7 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZjI2YmRlNDUwNDljN2I3ZDM0NjA1ZDgwNmEwNjgyOWI2Zjk1NWI4NTZhNTk5MWZkMzNlN2VhYmNlNDRjMDgzNCJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 8 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMjBhYzkwNzcxNzM5MzU4MDVhMzc5OTAzYmQ1OGQxMjc0NGViNDQyNjcwYmE5ZTAwNDMzMTI4ZDFjZDUyNjA5ZSJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 9 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMTdkYjE5MjNkMDNjNGVmNGU5ZjZlODcyYzVhNmFkMjU3OGIxYWZmMmIyODFmYmMzZmZhNzQ2NmM4MjVmYjkifX19"}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}
execute if score $eye_counter nmv.technical matches 10 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run summon vex ~ ~3 ~ {CustomName:'{"text":"Celestial Protector","color":"white","bold":true}',DeathLootTable:"nmv:empty",Tags:["rarity_done","nmv_eye_protector","nmv_done"],PersistenceRequired:1b,Health:5f,Attributes:[{Name:generic.max_health,Base:5}],Passengers:[{id:"minecraft:item_display",view_range:48f,Tags:["nmv_eye_protector_head"],transformation:{left_rotation:[0f,-0.11f,0f,0.994f],right_rotation:[0f,-0.992f,0f,0.12f],translation:[0f,0f,0f],scale:[.5f,.5f,.5f]},item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;-617609329,1490897422,-1127698747,-881369599],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYTk4ZjViYjdjMzYxMjA1NDY5YzliZDhlNzE1NDVhYjE4N2MwOGZjNDQ1ZTgzMzc4ZTc0MDQ2NDhlN2ZjMTM0ZSJ9fX0="}]}}}}}],active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:0b},{id:"minecraft:fire_resistance",amplifier:10b,duration:-1,show_particles:0b}]}

execute store result score $eye_bonus_damage nmv.technical run random value 1..10
execute if score $eye_bonus_damage nmv.technical matches 1 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] if predicate nmv:percentages/20percent run damage @s 5
execute if score $eye_bonus_damage nmv.technical matches 2 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] if predicate nmv:percentages/20percent run damage @s 10
execute if score $eye_bonus_damage nmv.technical matches 3 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] if predicate nmv:percentages/20percent run damage @s 15
execute if score $eye_bonus_damage nmv.technical matches 4 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] if predicate nmv:percentages/10percent run damage @s 20
execute if score $eye_bonus_damage nmv.technical matches 5 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] if predicate nmv:percentages/5percent run damage @s 25
execute if score $eye_bonus_damage nmv.technical matches 10 as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run damage @s 1

execute as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] anchored eyes run particle witch ~ ~1.2 ~ .7 .7 .7 .02 15
execute as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] anchored eyes run particle witch ~ ~1.2 ~ .7 .7 .7 .02 15

execute as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=#minecraft:projectile,distance=..5] run kill @e[type=#minecraft:projectile,distance=..5]
execute as @e[type=zombified_piglin,tag=nmv_eye] at @s if entity @e[type=minecraft:trident,distance=..5] run tp @e[type=minecraft:trident,distance=..5] @p[limit=1,sort=nearest]

execute if score $eye_boss_active nmv.technical matches 1 run schedule function nmv:boss/eye/counter_attack 1t